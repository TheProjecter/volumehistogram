<?xml version="1.0" encoding="utf-8"?>
<!--
Module:			VolumeHistogramDemo

Description:	Demo for color volume histogram

Input:			- image 
				
Output:			- color histogram 
				- rotational plot of color values.
				- highlight of mouse over color pixel on Original image.
				
Author(s):		- CT Yeung
				
History:
31Aug08			binary tree and display completed			(cty)
28Sep08			working on spin capability, need scaling & offset.	(cty)
//
// Copyright (c) 2009 C.T.Yeung

// Permission is hereby granted, free of charge, to any person obtaining
// a copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to
// permit persons to whom the Software is furnished to do so, subject to
// the following conditions:

// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.

// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
// IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
// CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
// TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
// SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
-->
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" 				
				xmlns:view="volumeHistogram.view.*"
				layout="absolute"
				width="100%" height="100%"
				horizontalScrollPolicy="off"
				verticalScrollPolicy="off"
				horizontalAlign="center" 
			    verticalAlign="top"
				creationComplete="onCreationComplete()" viewSourceURL="srcview/index.html">
				
	<mx:Script>
		<![CDATA[
			[Bindable][Embed(source="/assets/genenMarc.jpg")]public var photoClass1:Class;
			[Bindable][Embed(source="/assets/billnMarc.jpg")]public var photoClass2:Class;
			[Bindable][Embed(source="/assets/colortarget.png")]public var photoClass3:Class;
			[Bindable] protected var bmpData:BitmapData;
			[Bindable] protected var comboList:Array;
			
			// --------------------------------------------------------------------------
			public function onCreationComplete():void 
			// --------------------------------------------------------------------------
			{
				comboList = new Array();
				comboList.push("Gene and Marc");
				comboList.push("Bill and Marc");
				comboList.push("Color target");
				onChangeCombo();
			}
			
			protected function onChangeCombo():void 
			{
				switch (combo.selectedIndex)
				{
					case 1:
					bmpData = new photoClass2().bitmapData;
					break;
					
					case 2:
					bmpData = new photoClass3().bitmapData;
					break;
					
					default:
					case 0:
					bmpData = new photoClass1().bitmapData;
					break;
					
				}
				image.source = new Bitmap(bmpData);
				if( volumeHist.define(bmpData) )
					volumeHist.drawInit();
			}
			
			// --------------------------------------------------------------------------
			// image has changed
			protected function onHighlight():void 
			// --------------------------------------------------------------------------
			{
				image.source = new Bitmap(volumeHist.bmpResult);
			}
			
			// --------------------------------------------------------------------------
			// image has changed
			protected function onRefresh():void 
			// --------------------------------------------------------------------------
			{
				image.source = new Bitmap(bmpData);
			}
			
		]]>
	</mx:Script>
	
	<mx:Canvas x="200" y="10">
		<mx:VBox horizontalAlign="center">
			<mx:ComboBox id="combo" prompt="Select Photo" dataProvider="{comboList}" change="onChangeCombo()"/>
			<mx:Image id="image"/>
			<view:VolumeHistogram id="volumeHist" highlight="onHighlight()" endHighlight="onRefresh()"/>
		</mx:VBox>
		
	</mx:Canvas>
</mx:Application>
