<!-- saved from url=(0014)about:internet -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>VolumeHistogram.mxml</title>
<link rel="stylesheet" type="text/css" href="../../SourceStyles.css"/>
</head>

<body><pre><span class="MXMLProcessing_Instruction">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="MXMLComment">&lt;!--</span><span class="MXMLComment">
Module:            VolumeHistogram

Description:    Volume Histogram control

Input:            - image 
                
Output:            - color histogram 
                - rotational plot of color values.
                - highlight of mouse over color pixel on Original image.
                
Author(s):        - CT Yeung
                
History:
31Aug08            binary tree and display completed            (cty)
28Sep08            working on spin capability, need scaling &amp; offset.    (cty)
</span><span class="MXMLComment">--&gt;</span>
<span class="MXMLComponent_Tag">&lt;mx:Canvas</span><span class="MXMLDefault_Text">     xmlns:mx=&quot;</span><span class="MXMLString">http://www.adobe.com/2006/mxml</span><span class="MXMLDefault_Text">&quot; 
            xmlns:comp=&quot;</span><span class="MXMLString">com.*</span><span class="MXMLDefault_Text">&quot;
            width=&quot;</span><span class="MXMLString">450</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">300</span><span class="MXMLDefault_Text">&quot;
            verticalScrollPolicy=&quot;</span><span class="MXMLString">off</span><span class="MXMLDefault_Text">&quot;
            horizontalScrollPolicy=&quot;</span><span class="MXMLString">off</span><span class="MXMLDefault_Text">&quot;
            creationComplete=&quot;</span><span class="ActionScriptDefault_Text">onCreationComplete</span><span class="ActionScriptBracket/Brace">()</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
    
        <span class="MXMLSpecial_Tag">&lt;mx:Metadata&gt;</span>
        <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Event</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">name</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;highlight&quot;</span>, <span class="ActionScriptDefault_Text">type</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;flash.events.Event&quot;</span><span class="ActionScriptBracket/Brace">)]</span>    
        <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Event</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">name</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;endHighlight&quot;</span>, <span class="ActionScriptDefault_Text">type</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;flash.events.Event&quot;</span><span class="ActionScriptBracket/Brace">)]</span>    
        
    <span class="MXMLSpecial_Tag">&lt;/mx:Metadata&gt;</span>    
    
    <span class="MXMLSpecial_Tag">&lt;mx:Script&gt;</span>
        <span class="ActionScriptOperator">&lt;!</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">CDATA</span><span class="ActionScriptBracket/Brace">[</span>
            <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">cmbChoices</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>;    <span class="ActionScriptComment">// color space conversion choices
</span>
            <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">bmpSrc</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">BitmapData</span>;            <span class="ActionScriptComment">// input original image
</span>            <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">bmpDes</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">BitmapData</span>;            <span class="ActionScriptComment">// processed image
</span>            <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">bmpPlot</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">BitmapData</span>;            <span class="ActionScriptComment">// display data
</span>            <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">tree</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">BinaryTree</span>;                <span class="ActionScriptComment">// histogram
</span>
<span class="ActionScriptComment">///////////////////////////////////////////////////////////////////////////////////////////////////
</span><span class="ActionScriptComment">// Public UI methods
</span>            
            <span class="ActionScriptComment">// ------------------------------------------------------
</span>            <span class="ActionScriptComment">// initialization
</span>            <span class="ActionScriptComment">// ------------------------------------------------------
</span>            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onCreationComplete</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">boxControls</span>.<span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                <span class="ActionScriptDefault_Text">boxControls</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptOperator">-</span>300;
                <span class="ActionScriptDefault_Text">initCombo</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">tree</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">BinaryTree</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">// ------------------------------------------------------
</span>            <span class="ActionScriptComment">// build histogram from image
</span>            <span class="ActionScriptComment">// ------------------------------------------------------
</span>            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">define</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bmpData</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">BitmapData</span><span class="ActionScriptBracket/Brace">)</span>    <span class="ActionScriptComment">// input original image
</span>                                  <span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span>                <span class="ActionScriptComment">// return true if successful
</span>            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">tree</span>.<span class="ActionScriptDefault_Text">emptyTree</span><span class="ActionScriptBracket/Brace">()</span>;
                
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">bmpSrc</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptDefault_Text">bmpSrc</span>.<span class="ActionScriptDefault_Text">dispose</span><span class="ActionScriptBracket/Brace">()</span>;
                    
                <span class="ActionScriptReserved">this</span>.<span class="ActionScriptDefault_Text">bmpSrc</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">bmpData</span>.<span class="ActionScriptDefault_Text">clone</span><span class="ActionScriptBracket/Brace">()</span>;
                
                <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">y</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span><span class="ActionScriptOperator">=</span>0; <span class="ActionScriptDefault_Text">y</span><span class="ActionScriptOperator">&lt;</span><span class="ActionScriptDefault_Text">bmpSrc</span>.<span class="ActionScriptDefault_Text">height</span>; <span class="ActionScriptDefault_Text">y</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">){</span>
                    <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span><span class="ActionScriptOperator">=</span>0; <span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">&lt;</span><span class="ActionScriptDefault_Text">bmpSrc</span>.<span class="ActionScriptDefault_Text">width</span>; <span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">){</span>
                        <span class="ActionScriptDefault_Text">tree</span>.<span class="ActionScriptDefault_Text">insert</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bmpSrc</span>.<span class="ActionScriptDefault_Text">getPixel</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">x</span>,<span class="ActionScriptDefault_Text">y</span><span class="ActionScriptBracket/Brace">))</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">drawInit</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">true</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">// ------------------------------------------------------
</span>            <span class="ActionScriptComment">// draw image to display histogram
</span>            <span class="ActionScriptComment">// ------------------------------------------------------
</span>            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">drawInit</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">histogram</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">tree</span>.<span class="ActionScriptDefault_Text">getAll</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">imgControl</span>.<span class="ActionScriptDefault_Text">histogram</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">histogram</span>;
                <span class="ActionScriptDefault_Text">imgControl</span>.<span class="ActionScriptDefault_Text">onInitXYZ</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">true</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">// ------------------------------------------------------
</span>            <span class="ActionScriptComment">// roll in/out the display
</span>            <span class="ActionScriptComment">// ------------------------------------------------------
</span>            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onClickIcon</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> 
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">boxControls</span>.<span class="ActionScriptDefault_Text">visible</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">true</span>;
                
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">boxControls</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptOperator">-</span>300 <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">moveOut</span>.<span class="ActionScriptDefault_Text">end</span><span class="ActionScriptBracket/Brace">()</span>;
                    <span class="ActionScriptDefault_Text">moveOut</span>.<span class="ActionScriptDefault_Text">play</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">moveIn</span>.<span class="ActionScriptDefault_Text">end</span><span class="ActionScriptBracket/Brace">()</span>;
                    <span class="ActionScriptDefault_Text">moveIn</span>.<span class="ActionScriptDefault_Text">play</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>
            
<span class="ActionScriptComment">///////////////////////////////////////////////////////////////////////////////////////////////////
</span><span class="ActionScriptComment">// properties
</span>            
            <span class="ActionScriptComment">// ------------------------------------------------------
</span>            <span class="ActionScriptComment">// get original image data
</span>            <span class="ActionScriptComment">// ------------------------------------------------------
</span>            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">bmpSource</span> <span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">BitmapData</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">bmpSrc</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">// ------------------------------------------------------
</span>            <span class="ActionScriptComment">// get processed image data
</span>            <span class="ActionScriptComment">// ------------------------------------------------------
</span>            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">bmpResult</span> <span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">BitmapData</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">bmpDes</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
<span class="ActionScriptComment">///////////////////////////////////////////////////////////////////////////////////////////////////
</span><span class="ActionScriptComment">// Private         
</span>            <span class="ActionScriptComment">// ------------------------------------------------------
</span>            <span class="ActionScriptComment">// initialize combo box selections
</span>            <span class="ActionScriptComment">// ------------------------------------------------------    
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">initCombo</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">cmbChoices</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptString">&quot;RGB&quot;</span>, <span class="ActionScriptString">&quot;CIE L*a*b*&quot;</span><span class="ActionScriptBracket/Brace">]</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">// ------------------------------------------------------
</span>            <span class="ActionScriptComment">// move display out
</span>            <span class="ActionScriptComment">// ------------------------------------------------------
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onMoveOut</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">boxInfo</span>.<span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">// ------------------------------------------------------
</span>            <span class="ActionScriptComment">// move display in
</span>            <span class="ActionScriptComment">// ------------------------------------------------------
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onMoveIn</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">boxInfo</span>.<span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onClickRotate</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">switch</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">btnSpin</span>.<span class="ActionScriptDefault_Text">direction</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">&quot;up&quot;</span><span class="ActionScriptOperator">:</span>
                    <span class="ActionScriptDefault_Text">imgControl</span>.<span class="ActionScriptDefault_Text">rotateX</span><span class="ActionScriptBracket/Brace">(</span>10<span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">break</span>;
                    
                    <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">&quot;down&quot;</span><span class="ActionScriptOperator">:</span>
                    <span class="ActionScriptDefault_Text">imgControl</span>.<span class="ActionScriptDefault_Text">rotateX</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">-</span>10<span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">break</span>;
                    
                    <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">&quot;right&quot;</span><span class="ActionScriptOperator">:</span>
                    <span class="ActionScriptDefault_Text">imgControl</span>.<span class="ActionScriptDefault_Text">rotateY</span><span class="ActionScriptBracket/Brace">(</span>10<span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">break</span>;
                    
                    <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">&quot;left&quot;</span><span class="ActionScriptOperator">:</span>
                    <span class="ActionScriptDefault_Text">imgControl</span>.<span class="ActionScriptDefault_Text">rotateY</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">-</span>10<span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">break</span>;
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onColorInfo</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">clr</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">imgControl</span>.<span class="ActionScriptDefault_Text">clrInFocus</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">clrCount</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">imgControl</span>.<span class="ActionScriptDefault_Text">clrCount</span>;
                <span class="ActionScriptDefault_Text">txtRed</span>.<span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">((</span><span class="ActionScriptDefault_Text">clr</span> <span class="ActionScriptOperator">&amp;</span> 0<span class="ActionScriptDefault_Text">xFF0000</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">&gt;&gt;</span>16<span class="ActionScriptBracket/Brace">)</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">txtGreen</span>.<span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">((</span><span class="ActionScriptDefault_Text">clr</span> <span class="ActionScriptOperator">&amp;</span> 0<span class="ActionScriptDefault_Text">xFF00</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">&gt;&gt;</span>8<span class="ActionScriptBracket/Brace">)</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">txtBlue</span>.<span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">clr</span> <span class="ActionScriptOperator">&amp;</span> 0<span class="ActionScriptDefault_Text">xFF</span><span class="ActionScriptBracket/Brace">)</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">txtCount</span>.<span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">clrCount</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                
                <span class="ActionScriptDefault_Text">onHighlightBmp</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">clr</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onHighlightBmp</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">clrInFocus</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">uint</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bmpDes</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptDefault_Text">bmpDes</span>.<span class="ActionScriptDefault_Text">dispose</span><span class="ActionScriptBracket/Brace">()</span>;

                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">clrHighLight</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">clrPckr</span>.<span class="ActionScriptDefault_Text">selectedColor</span>;
                <span class="ActionScriptDefault_Text">bmpDes</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">bmpSrc</span>.<span class="ActionScriptDefault_Text">clone</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">y</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span><span class="ActionScriptOperator">=</span>0; <span class="ActionScriptDefault_Text">y</span><span class="ActionScriptOperator">&lt;</span><span class="ActionScriptDefault_Text">bmpDes</span>.<span class="ActionScriptDefault_Text">height</span>; <span class="ActionScriptDefault_Text">y</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span><span class="ActionScriptOperator">=</span>0; <span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">&lt;</span><span class="ActionScriptDefault_Text">bmpDes</span>.<span class="ActionScriptDefault_Text">width</span>; <span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">clr</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">bmpDes</span>.<span class="ActionScriptDefault_Text">getPixel</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">x</span>,<span class="ActionScriptDefault_Text">y</span><span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">clr</span><span class="ActionScriptOperator">==</span><span class="ActionScriptDefault_Text">clrInFocus</span><span class="ActionScriptBracket/Brace">)</span>
                            <span class="ActionScriptDefault_Text">bmpDes</span>.<span class="ActionScriptDefault_Text">setPixel</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">x</span>,<span class="ActionScriptDefault_Text">y</span>, <span class="ActionScriptDefault_Text">clrHighLight</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">dispatchEvent</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;highlight&quot;</span><span class="ActionScriptBracket/Brace">))</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onRefresh</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">dispatchEvent</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;endHighlight&quot;</span><span class="ActionScriptBracket/Brace">))</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">]]</span><span class="ActionScriptOperator">&gt;</span>
    <span class="MXMLSpecial_Tag">&lt;/mx:Script&gt;</span>
    <span class="MXMLComponent_Tag">&lt;mx:Move</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">moveOut</span><span class="MXMLDefault_Text">&quot; target=&quot;</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">boxControls</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">&quot; yFrom=&quot;</span><span class="MXMLString">-300</span><span class="MXMLDefault_Text">&quot; yTo=&quot;</span><span class="MXMLString">20</span><span class="MXMLDefault_Text">&quot; duration=&quot;</span><span class="MXMLString">2000</span><span class="MXMLDefault_Text">&quot; effectEnd=&quot;</span><span class="ActionScriptDefault_Text">onMoveOut</span><span class="ActionScriptBracket/Brace">()</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
    <span class="MXMLComponent_Tag">&lt;mx:Move</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">moveIn</span><span class="MXMLDefault_Text">&quot; target=&quot;</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">boxControls</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">&quot; yFrom=&quot;</span><span class="MXMLString">20</span><span class="MXMLDefault_Text">&quot; yTo=&quot;</span><span class="MXMLString">-300</span><span class="MXMLDefault_Text">&quot; duration=&quot;</span><span class="MXMLString">2000</span><span class="MXMLDefault_Text">&quot; effectStart=&quot;</span><span class="ActionScriptDefault_Text">onMoveIn</span><span class="ActionScriptBracket/Brace">()</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
    
    <span class="MXMLComponent_Tag">&lt;mx:VBox</span><span class="MXMLDefault_Text"> height=&quot;</span><span class="MXMLString">300</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; horizontalScrollPolicy=&quot;</span><span class="MXMLString">off</span><span class="MXMLDefault_Text">&quot; verticalScrollPolicy=&quot;</span><span class="MXMLString">off</span><span class="MXMLDefault_Text">&quot; x=&quot;</span><span class="MXMLString">40</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
        
    <span class="MXMLComment">&lt;!--</span><span class="MXMLComment"> Retractable Histogram Display </span><span class="MXMLComment">--&gt;</span>
        <span class="MXMLComponent_Tag">&lt;mx:HBox</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">boxControls</span><span class="MXMLDefault_Text">&quot; backgroundColor=&quot;</span><span class="MXMLString">0xFFFFFF</span><span class="MXMLDefault_Text">&quot;
                 paddingBottom=&quot;</span><span class="MXMLString">10</span><span class="MXMLDefault_Text">&quot; paddingLeft=&quot;</span><span class="MXMLString">10</span><span class="MXMLDefault_Text">&quot; 
                 paddingRight=&quot;</span><span class="MXMLString">10</span><span class="MXMLDefault_Text">&quot; paddingTop=&quot;</span><span class="MXMLString">10</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
                 
    <span class="MXMLComment">&lt;!--</span><span class="MXMLComment"> Volume histogram </span><span class="MXMLComment">--&gt;</span>
            <span class="MXMLComponent_Tag">&lt;mx:VBox</span><span class="MXMLDefault_Text"> borderColor=&quot;</span><span class="MXMLString">0x88</span><span class="MXMLDefault_Text">&quot; borderThickness=&quot;</span><span class="MXMLString">1</span><span class="MXMLDefault_Text">&quot; borderStyle=&quot;</span><span class="MXMLString">solid</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
                <span class="MXMLComponent_Tag">&lt;comp:RotateImage</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">imgControl</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">256</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">256</span><span class="MXMLDefault_Text">&quot; 
                                  newColorInfo=&quot;</span><span class="ActionScriptDefault_Text">onColorInfo</span><span class="ActionScriptBracket/Brace">()</span><span class="MXMLDefault_Text">&quot; refresh=&quot;</span><span class="ActionScriptDefault_Text">onRefresh</span><span class="ActionScriptBracket/Brace">()</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
            <span class="MXMLComponent_Tag">&lt;/mx:VBox&gt;</span>
            
    <span class="MXMLComment">&lt;!--</span><span class="MXMLComment"> Controls </span><span class="MXMLComment">--&gt;</span>
            <span class="MXMLComponent_Tag">&lt;mx:VBox</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">boxButtons</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
                <span class="MXMLComponent_Tag">&lt;mx:ComboBox</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">cmbColor</span><span class="MXMLDefault_Text">&quot; dataProvider=&quot;</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">cmbChoices</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">110</span><span class="MXMLDefault_Text">&quot; enabled=&quot;</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
                <span class="MXMLComponent_Tag">&lt;comp:RotateControl</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">btnSpin</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">100</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">100</span><span class="MXMLDefault_Text">&quot; rotateClicked=&quot;</span><span class="ActionScriptDefault_Text">onClickRotate</span><span class="ActionScriptBracket/Brace">()</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
                <span class="MXMLComponent_Tag">&lt;mx:HBox&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;mx:Button</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">btnReduce</span><span class="MXMLDefault_Text">&quot; label=&quot;</span><span class="MXMLString">(-)</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">50</span><span class="MXMLDefault_Text">&quot; enabled=&quot;</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;mx:Button</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">btnEnlarge</span><span class="MXMLDefault_Text">&quot; label=&quot;</span><span class="MXMLString">(+)</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">50</span><span class="MXMLDefault_Text">&quot; enabled=&quot;</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
                <span class="MXMLComponent_Tag">&lt;/mx:HBox&gt;</span>
            <span class="MXMLComponent_Tag">&lt;/mx:VBox&gt;</span>
        <span class="MXMLComponent_Tag">&lt;/mx:HBox&gt;</span>
    <span class="MXMLComponent_Tag">&lt;/mx:VBox&gt;</span>
    
    <span class="MXMLComment">&lt;!--</span><span class="MXMLComment"> Retraction control (icon) </span><span class="MXMLComment">--&gt;</span>
    <span class="MXMLComponent_Tag">&lt;mx:HBox&gt;</span>
        <span class="MXMLComponent_Tag">&lt;mx:Image</span><span class="MXMLDefault_Text">     id=&quot;</span><span class="MXMLString">imgIcon</span><span class="MXMLDefault_Text">&quot; 
                    source=&quot;</span><span class="MXMLString">@Embed(source=&apos;/assets/3Dhstgrm.png&apos;)</span><span class="MXMLDefault_Text">&quot;
                    useHandCursor=&quot;</span><span class="MXMLString">true</span><span class="MXMLDefault_Text">&quot;
                    buttonMode=&quot;</span><span class="MXMLString">true</span><span class="MXMLDefault_Text">&quot;
                    click=&quot;</span><span class="ActionScriptDefault_Text">onClickIcon</span><span class="ActionScriptBracket/Brace">()</span><span class="MXMLDefault_Text">&quot; </span><span class="MXMLComponent_Tag">/&gt;</span>
    <span class="MXMLComponent_Tag">&lt;/mx:HBox&gt;</span>
    
    <span class="MXMLComment">&lt;!--</span><span class="MXMLComment"> hover information </span><span class="MXMLComment">--&gt;</span>
        <span class="MXMLComponent_Tag">&lt;mx:VBox</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">boxInfo</span><span class="MXMLDefault_Text">&quot; includeInLayout=&quot;</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">&quot; x=&quot;</span><span class="MXMLString">315</span><span class="MXMLDefault_Text">&quot; y=&quot;</span><span class="MXMLString">200</span><span class="MXMLDefault_Text">&quot; visible=&quot;</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">&quot; 
            horizontalScrollPolicy=&quot;</span><span class="MXMLString">off</span><span class="MXMLDefault_Text">&quot; verticalScrollPolicy=&quot;</span><span class="MXMLString">off</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
            <span class="MXMLComponent_Tag">&lt;mx:HBox&gt;</span>
                <span class="MXMLComponent_Tag">&lt;mx:VBox&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;mx:HBox&gt;</span>
                        <span class="MXMLComponent_Tag">&lt;mx:Label</span><span class="MXMLDefault_Text"> text=&quot;</span><span class="MXMLString">R:</span><span class="MXMLDefault_Text">&quot; </span><span class="MXMLComponent_Tag">/&gt;</span>
                        <span class="MXMLComponent_Tag">&lt;mx:Label</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">txtRed</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">30</span><span class="MXMLDefault_Text">&quot; </span><span class="MXMLComponent_Tag">/&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;/mx:HBox&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;mx:HBox&gt;</span>
                        <span class="MXMLComponent_Tag">&lt;mx:Label</span><span class="MXMLDefault_Text"> text=&quot;</span><span class="MXMLString">G:</span><span class="MXMLDefault_Text">&quot; </span><span class="MXMLComponent_Tag">/&gt;</span>
                        <span class="MXMLComponent_Tag">&lt;mx:Label</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">txtGreen</span><span class="MXMLDefault_Text">&quot; </span><span class="MXMLComponent_Tag">/&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;/mx:HBox&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;mx:HBox&gt;</span>
                        <span class="MXMLComponent_Tag">&lt;mx:Label</span><span class="MXMLDefault_Text"> text=&quot;</span><span class="MXMLString">B:</span><span class="MXMLDefault_Text">&quot; </span><span class="MXMLComponent_Tag">/&gt;</span>
                        <span class="MXMLComponent_Tag">&lt;mx:Label</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">txtBlue</span><span class="MXMLDefault_Text">&quot; </span><span class="MXMLComponent_Tag">/&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;/mx:HBox&gt;</span>
                <span class="MXMLComponent_Tag">&lt;/mx:VBox&gt;</span>
                <span class="MXMLComponent_Tag">&lt;mx:ColorPicker</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">clrPckr</span><span class="MXMLDefault_Text">&quot; selectedColor=&quot;</span><span class="MXMLString">0xFFFF00</span><span class="MXMLDefault_Text">&quot; showTextField=&quot;</span><span class="MXMLString">true</span><span class="MXMLDefault_Text">&quot; 
                        useHandCursor=&quot;</span><span class="MXMLString">true</span><span class="MXMLDefault_Text">&quot; buttonMode=&quot;</span><span class="MXMLString">true</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
            <span class="MXMLComponent_Tag">&lt;/mx:HBox&gt;</span>
            <span class="MXMLComponent_Tag">&lt;mx:HBox&gt;</span>
                <span class="MXMLComponent_Tag">&lt;mx:Label</span><span class="MXMLDefault_Text"> text=&quot;</span><span class="MXMLString">Count:</span><span class="MXMLDefault_Text">&quot; </span><span class="MXMLComponent_Tag">/&gt;</span>
                <span class="MXMLComponent_Tag">&lt;mx:Label</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">txtCount</span><span class="MXMLDefault_Text">&quot; </span><span class="MXMLComponent_Tag">/&gt;</span>
            <span class="MXMLComponent_Tag">&lt;/mx:HBox&gt;</span>
        <span class="MXMLComponent_Tag">&lt;/mx:VBox&gt;</span>
        
    
<span class="MXMLComponent_Tag">&lt;/mx:Canvas&gt;</span></pre></body>
</html>
